# Зависимости
- DOSBox
- `cargo`

# Установка

Чтобы установить, перейдите в директорию склонированного репозитория и выполните команды вида:

```
TASM_DIR="/path/to/tasm" cargo build --release
cp target/release/tasm-runner $HOME/.local/bin
```

В первой команде передается переменная окружения `TASM_DIR`, указывающая директорию с компилятором и компоновщиком TASM. В ней должны содержаться файлы `TASM.exe` и `TLINK.exe`. Переменную `TASM_DIR` можно не передавть, и запустить просто:

```
cargo build --release
```

В таком случае будет необходимо каждый раз при использовании команду указывать директорию компилятора через параметр `-c`. В прочем, параметр `-c` можно указыать всегда, если нужно временно использовать другие файлы

# Использование

```
Запускает компилятор и компоновщик TASM в DOSbox для создания исполняемого файла из кода в файле(ах) [FILES]... В директории исходных файлов появляется поддиректория "BUILD" с исполняемым файлом

Usage: tasm-runner [OPTIONS] [FILES]...

Arguments:
  [FILES]...

Options:
  -c <COMPILER_DIR>               Устанавливает директорию (не путь до файла) с компилятором и компоновщиком TASM. В ней должны содержаться файлы "TASM.exe" и "TLINK.exe"
      --copts <COMPLIER_OPTIONS>  Принимает строку, в которой содержатся параметры для TASM.exe. Например: "/X /L". Подробнее: C:\TASM
      --lopts <LINKER_OPTIONS>    Принимает строку, в которой содержатся параметры для TLINK.exe. Например: "/L /T". Подробнее: C:\TLINK [default: /X]
  -d, --debug                     Запустить дебаггер TD.exe после компиляции
  -e, --exit                      Выйти из DOSBox после выполнения
  -h, --help                      Print help
```

Пример:

```
tasm-runner hello.asm --lopts="/x" --exit
```

# Бонус

Если очень хочется выводить кириллицу и безболезненно писать прямо на ней строки в программе, то можно использовать сочетание команд:

```
iconv hello_utf.asm -f UTF-8 -t CP866 > hello.asm
tasm-runner hello.asm --lopts="/x"
```

Первая команда создает копию исходного файла в кодировке CP866. А если еще в DOSBox прописать `keyb 866` (что автоматически происходит при выполнении этого скрипта), то строка на кириллице, заданная с помощью директивы `db` будет отображена правильно.
